# =============================================================================
# AWS Production Environment Configuration - EC2 with PostgreSQL
# =============================================================================
# This configuration is for AWS EC2 deployment with PostgreSQL on the same instance
# PostgreSQL is automatically installed and configured by setup scripts
#
# To use this configuration:
#   1. Deploy to AWS EC2 instance
#   2. Run: sudo ./remote-scripts/setup-postgresql.sh (auto-configures DB)
#   3. Copy this file: cp aws-env.ec2.example aws-env
#   4. Update API keys and domain name
#   5. Run: sudo ./remote-scripts/setup-application.sh
#
# For AWS RDS setup, see: aws-env.rds.example
# =============================================================================

# Environment
ENVIRONMENT=production

# Deployment Path (where the application is deployed)
ENVIRONMENT_PATH=/opt/crypto-ia

# Database (PostgreSQL on same EC2 instance)
# This will be auto-configured by setup-postgresql.sh script
# The script creates the database and saves credentials to /etc/crypto-saas/database.conf
DATABASE_URL=postgresql://crypto_user:CHANGE_ME@localhost:5432/crypto_db
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Web UI
WEB_UI_HOST=crypto-ai.crypto-vision.com  # CHANGE TO YOUR DOMAIN
WEB_UI_PORT=443
WEB_UI_PROTOCOL=https

# SSL Certificate
# Self-signed certificates are auto-generated by setup script
# For production, replace with Let's Encrypt or your own certificates
SSL_CERT_PATH=/opt/crypto-ia/certs/server.crt
SSL_KEY_PATH=/opt/crypto-ia/certs/server.key

# Data Collection
COLLECTION_START_DATE=2024-01-01
TOP_N_CRYPTOS=50
COLLECTION_SCHEDULE=0 */6 * * *  # Every 6 hours
BINANCE_API_KEY=your_binance_key_here  # REQUIRED
BINANCE_API_SECRET=your_binance_secret_here  # REQUIRED

# Prediction Engine
MODEL_TYPE=LSTM  # or GRU
PREDICTION_HORIZON_HOURS=24
MODEL_RETRAIN_SCHEDULE=0 2 * * 0  # Weekly on Sunday at 2 AM
SEQUENCE_LENGTH=168  # 7 days of hourly data

# GenAI (REQUIRED)
OPENAI_API_KEY=your_openai_key_here  # Get from https://platform.openai.com/api-keys
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7

# Alert System
ALERT_ENABLED=true
ALERT_THRESHOLD_PERCENT=10.0
ALERT_COOLDOWN_HOURS=4
SMS_PROVIDER=aws_sns  # or twilio
SMS_PHONE_NUMBER=+1234567890  # Your phone number for alerts

# AWS SNS Configuration (if using aws_sns)
AWS_SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:crypto-alerts  # CHANGE THIS
AWS_REGION=us-east-1

# Twilio Configuration (if using twilio)
# TWILIO_ACCOUNT_SID=your_twilio_sid_here
# TWILIO_AUTH_TOKEN=your_twilio_token_here
# TWILIO_FROM_NUMBER=+1234567890

# API
API_HOST=0.0.0.0
API_PORT=5000
API_KEY_REQUIRED=true  # Enable API key authentication in production
RATE_LIMIT_PER_MINUTE=100

# Streamlit
STREAMLIT_PORT=8501

# Security
SECRET_KEY=CHANGE_ME_TO_RANDOM_SECRET_KEY  # Generate with: openssl rand -hex 32
ALLOWED_ORIGINS=https://crypto-ai.crypto-vision.com  # CHANGE TO YOUR DOMAIN

# Logging
LOG_LEVEL=INFO
LOG_FILE=/var/log/crypto-saas/app.log

# Log Retention
AUDIT_LOGS_RETENTION_DAYS=90
CHAT_HISTORY_RETENTION_DAYS=30
QUERY_AUDIT_LOGS_RETENTION_DAYS=365
SYSTEM_LOGS_RETENTION_DAYS=30
LOG_RETENTION_SCHEDULE=0 2 * * *  # Daily at 2 AM

# =============================================================================
# DEPLOYMENT INSTRUCTIONS
# =============================================================================
#
# 1. Launch EC2 Instance:
#    - Instance Type: t3.small or larger
#    - OS: Amazon Linux 2023 or Ubuntu 22.04
#    - Storage: 20GB root + 20GB data volume (for PostgreSQL)
#    - Security Group: Allow ports 22, 443, 8501, 10443
#
# 2. SSH to Instance:
#    ssh -i your-key.pem ec2-user@your-instance-ip
#
# 3. Clone Repository:
#    sudo mkdir -p /opt/crypto-ia
#    sudo chown ec2-user:ec2-user /opt/crypto-ia
#    cd /opt/crypto-ia
#    git clone <your-repo-url> .
#
# 4. Run Setup Scripts (in order):
#    sudo ./remote-scripts/install-dependencies.sh
#    sudo ./remote-scripts/setup-postgresql.sh
#    sudo ./remote-scripts/setup-application.sh
#
# 5. Configure Environment:
#    cp aws-env.ec2.example aws-env
#    nano aws-env  # Update API keys and domain
#
# 6. Start Services:
#    sudo ./remote-scripts/start-services.sh
#
# 7. Verify Deployment:
#    sudo systemctl status crypto-saas-*
#    curl http://localhost:5000/api/health
#
# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# [ ] Update SECRET_KEY with random value
# [ ] Update WEB_UI_HOST with your domain
# [ ] Update ALLOWED_ORIGINS with your domain
# [ ] Add your OPENAI_API_KEY
# [ ] Add your BINANCE_API_KEY and SECRET (if collecting data)
# [ ] Configure AWS SNS or Twilio for alerts
# [ ] Update database password (auto-generated by setup script)
# [ ] Configure SSL certificates (Let's Encrypt recommended)
# [ ] Enable API_KEY_REQUIRED and create API keys
# [ ] Configure Security Group to restrict access
# [ ] Set up CloudWatch monitoring
# [ ] Configure automated backups
#
# =============================================================================
